# Docker hw

–ü—Ä–∏–≤–µ—Ç!

—ç—Ç–æ –Ω–µ–±–æ–ª—å—à–æ–π [readMe.md](http://readme.md) –æ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Å `docker` –∏ `mlflow`

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –æ–±—Ä–∞–∑ –∏–∑ Dockerfile —è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –∫–æ–º–∞–Ω–¥—É

```docker
docker build -t random-forest-api . 
```

–∑–∞—Ç–µ–º —è —Å–æ–∑–¥–∞–ª–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–≥–æ –æ–±—Ä–∞–∑–∞

```docker
docker run -d -p 8000:8000 --name random-forest-container random-forest-api
```

–ø–æ—Å–ª–µ —á–µ–≥–æ –≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏–ª–∞ mlflow

```bash
mlflow server \
    --backend-store-uri sqlite:///mlflow.db \
    --default-artifact-root ./mlruns \
    --host 0.0.0.0 \
    --port 5001
```

–∏ —Å –ø–æ–º–æ—â—å—é CURL –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ–≤–µ—Ä–∏–ª–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –º–æ–π –¥–æ–∫–µ—Ä

```bash
curl -X POST http://localhost:8000/predict-and-log \
-H "Content-Type: application/json" \
-d '{
    "features": [
        [195, 241, 3.615385, 3.991453, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    ],
    "y_true": [1]
}'
```

–∏, –∫ —Å—á–∞—Å—Ç—å—é, –æ–Ω —Ä–∞–±–æ—Ç–∞–ª ü•≥¬† (–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –Ω–µ —Å –ø–µ—Ä–≤–æ–π –ø–æ–ø—ã—Ç–∫–∏ –∏ –¥–∞–∂–µ –Ω–µ —Å –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è –∫–∞–∫ —è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–æ–∫–µ—Ä–æ–º)

![image.png](assets/image.png)

–ê MLflow –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Å—Å—ã–ª–∫–µ [http://localhost:5001](http://localhost:5001/) 

![image.png](assets/image%201.png)

–ó–∞—Ç–µ–º —è —á—É—Ç—å –¥–æ—Ä–∞–±–æ—Ç–∞–ª–∞ —Å–∫—Ä–∏–ø—Ç —á—Ç–æ–±—ã –≤—Å—ë —Å–æ—Ö—Ä–∞–Ω—è–ª–æ—Å—å –≤ –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö 

![image.png](assets/image%202.png)